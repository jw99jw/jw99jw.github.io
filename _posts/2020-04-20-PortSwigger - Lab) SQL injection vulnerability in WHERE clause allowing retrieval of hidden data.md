---
layout: post
title: Lab) SQL injection vulnerability in WHERE clause allowing retrieval of hidden data
categories: [SQL Injection]
tags: [SQL Injection]
---

# Lab: SQL injection vulnerability in WHERE clause allowing retrieval of hidden data

<img width="70%" src="https://user-images.githubusercontent.com/69608504/164446588-87786041-ab7f-4c8d-8763-94d2850c783d.png"/>

Goal : Display details of all products in any category, both released and unreleased.

# Step 1. Check if there is any SQL injection vulnerability in the application.

<img width="70%" src="https://user-images.githubusercontent.com/69608504/164447748-3c5a0f81-ea28-41f1-8675-0928155f7e23.png"/>

If you type ' at the back of the query, as shown in the picture above, the application will recognize the query as:

SELECT * FROM [name of the column that contains products] WHERE category = ''

And this query will cause error, because the application does not filter out ' character, which means the application has SQL injection vulnerability.

Then the next step is to figure out how to induce the application to display all the products, including the unreleased products.

In order to accomplish the attack, the query must be recognized as true statement, so if we try:

<img width="70%" src="https://user-images.githubusercontent.com/69608504/164449083-3b55cabc-1e08-4471-8fb7-af474cdd096e.png"/>

we solve the lab.

## Why is it solved?

To make an application to display data as we want, the SQL query must be recognized as true statement.

In the last try, we typed ' OR 1=1--.

In the SQL statement, 1=1 is always recognized as TRUE value. 

And OR operator compares values of each side, which is Pets and 1=1(which is always TRUE).

OR operator always concludes that a statement is true if any of the value is true, the whole statement is true.



And the -- located at the end of the query means to comment out the rest of the characters located behind it.

So whatever operator is located at the query, we could just comment out unnecessary operators, which is crucial during executing SQL injection.

So the query that we just typed will always be recognized as true, returning all the values of the product category.

### Also,

1=1 is most commonly used parameter to make the statement always TRUE.

But you could always use something different, like 2=2-- OR 3=3-- and so on. 
